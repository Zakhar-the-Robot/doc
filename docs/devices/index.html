<!doctype html><html lang=en-us dir=ltr>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="The main node - it is the node containing main operational program if the robot. Currently it is Raspberry Pi 4.
Zakhar has three devices connected to the main node:
 The Face Module - responsible for expressions and interaction with the user The Moving Platform - responsible for movement The Sensor Platform - responsible for perception  Each device stores data into registers and interacts with the main node via I2C (i2c conventions used in the project are here)">
<meta name=theme-color content="#FFFFFF">
<meta name=color-scheme content="light dark"><meta property="og:title" content="WIP: Devices">
<meta property="og:description" content="The main node - it is the node containing main operational program if the robot. Currently it is Raspberry Pi 4.
Zakhar has three devices connected to the main node:
 The Face Module - responsible for expressions and interaction with the user The Moving Platform - responsible for movement The Sensor Platform - responsible for perception  Each device stores data into registers and interacts with the main node via I2C (i2c conventions used in the project are here)">
<meta property="og:type" content="article">
<meta property="og:url" content="https://zakhar-the-robot.github.io/doc/docs/devices/"><meta property="article:section" content="docs">
<meta property="article:modified_time" content="2022-02-23T08:47:59+01:00">
<title>WIP: Devices | Zakhar the Robot</title>
<link rel=manifest href=/doc/manifest.json>
<link rel=icon href=/doc/favicon.png type=image/x-icon>
<link rel=stylesheet href=/doc/book.min.82c5dbd23447cee0b4c2aa3ed08ce0961faa40e1fa370eee4f8c9f02e0d46b5f.css integrity="sha256-gsXb0jRHzuC0wqo+0Izglh+qQOH6Nw7uT4yfAuDUa18=" crossorigin=anonymous>
<script defer src=/doc/flexsearch.min.js></script>
<script defer src=/doc/en.search.min.37d85496af3a12e72b0c8d2a1ddc5bac1500a3ede039aa1f72fbeccc5ff3d3e0.js integrity="sha256-N9hUlq86EucrDI0qHdxbrBUAo+3gOaofcvvszF/z0+A=" crossorigin=anonymous></script>
</head>
<body dir=ltr>
<input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control>
<main class="container flex">
<aside class=book-menu>
<div class=book-menu-content>
<nav>
<h2 class=book-brand>
<a class="flex align-center" href=/doc/><span>Zakhar the Robot</span>
</a>
</h2>
<div class=book-search>
<input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/>
<div class="book-search-spinner hidden"></div>
<ul id=book-search-results></ul>
</div>
<ul>
<li>
<span>Communication Protocols</span>
<ul>
<li>
<a href=/doc/docs/communication-protocols/deprecated-i2c/>( Deprecated) I2c</a>
<ul>
</ul>
</li>
<li>
<a href=/doc/docs/communication-protocols/canbus/>Canbus</a>
</li>
</ul>
</li>
<li>
<a href=/doc/docs/devices/ class=active>WIP: Devices</a>
</li>
</ul>
<ul>
<li>
<a href=https://github.com/an-dr/zakhar target=_blank rel=noopener>
â†— Sources
</a>
</li>
</ul>
</nav>
<script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>
</div>
</aside>
<div class=book-page>
<header class=book-header>
<div class="flex align-center justify-between">
<label for=menu-control>
<img src=/doc/svg/menu.svg class=book-icon alt=Menu>
</label>
<strong>WIP: Devices</strong>
<label for=toc-control>
<img src=/doc/svg/toc.svg class=book-icon alt="Table of Contents">
</label>
</div>
<aside class="hidden clearfix">
<nav id=TableOfContents>
<ul>
<li><a href=#the-face-module>The Face Module</a>
<ul>
<li><a href=#fm---registers>FM - Registers</a></li>
<li><a href=#fm---commands>FM - Commands</a></li>
<li><a href=#fm---source-code>FM - Source code</a></li>
</ul>
</li>
<li><a href=#the-moving-platform>The Moving Platform</a>
<ul>
<li><a href=#mp---registers>MP - Registers</a></li>
<li><a href=#mp---commands>MP - Commands</a></li>
<li><a href=#mp-source-code>MP: Source code</a></li>
</ul>
</li>
<li><a href=#the-sensor-platform>The Sensor Platform</a>
<ul>
<li><a href=#sp---registers>SP - Registers</a></li>
<li><a href=#sp---commands>SP - Commands</a></li>
<li><a href=#sp-source-code>SP: Source code</a></li>
</ul>
</li>
</ul>
</nav>
</aside>
</header>
<article class=markdown><p>The main node - it is the node containing main operational program if the robot. Currently it is Raspberry Pi 4.</p>
<p>Zakhar has three devices connected to the main node:</p>
<ul>
<li>The Face Module - responsible for expressions and interaction with the user</li>
<li>The Moving Platform - responsible for movement</li>
<li>The Sensor Platform - responsible for perception</li>
</ul>
<p>Each device stores data into registers and interacts with the main node via I2C (i2c conventions used in the project <a href=./i2c.md>are here</a>)</p>
<h2 id=the-face-module>
The Face Module
<a class=anchor href=#the-face-module>#</a>
</h2>
<p>The module represents a display with a preloaded set of facial expressions.</p>
<h3 id=fm---registers>
FM - Registers
<a class=anchor href=#fm---registers>#</a>
</h3>
<table>
<thead>
<tr>
<th>Address</th>
<th>Name</th>
<th>Type</th>
<th>Commentary</th>
</tr>
</thead>
<tbody>
<tr>
<td>0x00</td>
<td>CMD</td>
<td>R/W</td>
<td>Command register. The device is reading commands from here</td>
</tr>
<tr>
<td>0x01</td>
<td>MODE</td>
<td>RO</td>
<td>The Mode register</td>
</tr>
</tbody>
</table>
<h3 id=fm---commands>
FM - Commands
<a class=anchor href=#fm---commands>#</a>
</h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Code (ASCII)</th>
<th>Commentary</th>
</tr>
</thead>
<tbody>
<tr>
<td>CALM</td>
<td>0x30 (0)</td>
<td></td>
</tr>
<tr>
<td>BLINK</td>
<td>0x31 (1)</td>
<td></td>
</tr>
<tr>
<td>ANGRY</td>
<td>0x32 (2)</td>
<td></td>
</tr>
<tr>
<td>HAPPY</td>
<td>0x33 (3)</td>
<td></td>
</tr>
<tr>
<td>SAD</td>
<td>0x34 (4)</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id=fm---source-code>
FM - Source code
<a class=anchor href=#fm---source-code>#</a>
</h3>
<p><a href=https://github.com/an-dr/zakhar-face-module>https://github.com/an-dr/zakhar-face-module</a></p>
<h2 id=the-moving-platform>
The Moving Platform
<a class=anchor href=#the-moving-platform>#</a>
</h2>
<p>It is a platform with two wheels rotating by DC motors. The platform also carries a positional sensor.</p>
<h3 id=mp---registers>
MP - Registers
<a class=anchor href=#mp---registers>#</a>
</h3>
<table>
<thead>
<tr>
<th>Address</th>
<th>Name</th>
<th>Type</th>
<th>Commentary</th>
</tr>
</thead>
<tbody>
<tr>
<td>0x00</td>
<td>CMD</td>
<td>R/W</td>
<td>Command register. The device is reading commands from here</td>
</tr>
<tr>
<td>0x01</td>
<td>ARG</td>
<td>R/W</td>
<td>Optional argument of the command</td>
</tr>
<tr>
<td>0x02</td>
<td>MODE</td>
<td>RO</td>
<td>The Mode register</td>
</tr>
<tr>
<td>0x03</td>
<td>SPEED</td>
<td>RO</td>
<td>Current speed mode (0-3)</td>
</tr>
<tr>
<td>0x04</td>
<td>ANGLE_X_S</td>
<td>RO</td>
<td>Sing of the angle for X (0,1)</td>
</tr>
<tr>
<td>0x05</td>
<td>ANGLE_X</td>
<td>RO</td>
<td>THe value of the X angle (0-180)</td>
</tr>
<tr>
<td>0x05</td>
<td>ANGLE_Y_S</td>
<td>RO</td>
<td>Sing of the angle for Y (0,1)</td>
</tr>
<tr>
<td>0x06</td>
<td>ANGLE_Y</td>
<td>RO</td>
<td>THe value of the Y angle (0-180)</td>
</tr>
<tr>
<td>0x07</td>
<td>ANGLE_Z_S</td>
<td>RO</td>
<td>Sing of the angle for Z (0,1)</td>
</tr>
<tr>
<td>0x08</td>
<td>ANGLE_Z</td>
<td>RO</td>
<td>THe value of the Z angle (0-180)</td>
</tr>
</tbody>
</table>
<h3 id=mp---commands>
MP - Commands
<a class=anchor href=#mp---commands>#</a>
</h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Code (ASCII)</th>
<th>Commentary</th>
</tr>
</thead>
<tbody>
<tr>
<td>FORWARD</td>
<td>0x77 (w)</td>
<td>move</td>
</tr>
<tr>
<td>BACKWARD</td>
<td>0x73 (s)</td>
<td>move</td>
</tr>
<tr>
<td>LEFT</td>
<td>0x61 (a)</td>
<td>move, accepts an argument in degrees</td>
</tr>
<tr>
<td>RIGHT</td>
<td>0x64 (d)</td>
<td>move, accepts an argument in degrees</td>
</tr>
<tr>
<td>SHIVER</td>
<td>0x71 (q)</td>
<td>trembling during a second</td>
</tr>
<tr>
<td>STOP_KB</td>
<td>0x20 ( )</td>
<td>stop moving</td>
</tr>
<tr>
<td>STOP</td>
<td>0xA0</td>
<td>stop moving</td>
</tr>
<tr>
<td>SPEED0</td>
<td>0x30 (0)</td>
<td>set the speed mode</td>
</tr>
<tr>
<td>SPEED1</td>
<td>0x31 (1)</td>
<td>set the speed mode</td>
</tr>
<tr>
<td>SPEED2</td>
<td>0x32 (2)</td>
<td>set the speed mode</td>
</tr>
<tr>
<td>SPEED3</td>
<td>0x33 (3)</td>
<td>set the speed mode</td>
</tr>
<tr>
<td>MPU_CALIBRATE</td>
<td>0x63 (c)</td>
<td>recalibrate the positioning sensor</td>
</tr>
<tr>
<td>TEST</td>
<td>0x74 (t)</td>
<td>used for testing purposes</td>
</tr>
</tbody>
</table>
<h3 id=mp-source-code>
MP: Source code
<a class=anchor href=#mp-source-code>#</a>
</h3>
<p><a href=https://github.com/an-dr/zakhar_platform>https://github.com/an-dr/zakhar_platform</a></p>
<h2 id=the-sensor-platform>
The Sensor Platform
<a class=anchor href=#the-sensor-platform>#</a>
</h2>
<p>The platforms has three distance sensors and a light sensor</p>
<h3 id=sp---registers>
SP - Registers
<a class=anchor href=#sp---registers>#</a>
</h3>
<table>
<thead>
<tr>
<th>Address</th>
<th>Name</th>
<th>Type</th>
<th>Commentary</th>
</tr>
</thead>
<tbody>
<tr>
<td>0x00</td>
<td>CMD</td>
<td>R/W</td>
<td>Command register. The device is reading commands from here</td>
</tr>
<tr>
<td>0x01</td>
<td>ARG</td>
<td>R/W</td>
<td>Optional argument of the command</td>
</tr>
<tr>
<td>0x02</td>
<td>DIST_L</td>
<td>RO</td>
<td>Value of the left distance sensor in cm</td>
</tr>
<tr>
<td>0x03</td>
<td>DIST_C</td>
<td>RO</td>
<td>Value of the central distance sensor in cm</td>
</tr>
<tr>
<td>0x04</td>
<td>DIST_R</td>
<td>RO</td>
<td>Value of the right distance sensor in cm</td>
</tr>
<tr>
<td>0x05</td>
<td>LIGHT_HI</td>
<td>RO</td>
<td>Value of the light sensor, higher part. The less the brighter</td>
</tr>
<tr>
<td>0x06</td>
<td>LIGHT_LO</td>
<td>RO</td>
<td>Value of the light sensor, lower part. The less the brighter</td>
</tr>
</tbody>
</table>
<h3 id=sp---commands>
SP - Commands
<a class=anchor href=#sp---commands>#</a>
</h3>
<p>Not implemented</p>
<h3 id=sp-source-code>
SP: Source code
<a class=anchor href=#sp-source-code>#</a>
</h3>
<p><a href=https://github.com/an-dr/zakhar_sensors>https://github.com/an-dr/zakhar_sensors</a></p>
</article>
<footer class=book-footer>
<div class="flex flex-wrap justify-between">
<div><a class="flex align-center" href=https://zakhar-the-robot.github.io/doc//commit/2536aae610019545ffc904c76395d9c963c33a10 title="Last modified by Andrei Gramakov |  2022-Feb-23" target=_blank rel=noopener>
<img src=/doc/svg/calendar.svg class=book-icon alt=Calendar>
<span> 2022-Feb-23</span>
</a>
</div>
</div>
<script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script>
</footer>
<label for=menu-control class="hidden book-menu-overlay"></label>
</div>
<aside class=book-toc>
<div class=book-toc-content>
<nav id=TableOfContents>
<ul>
<li><a href=#the-face-module>The Face Module</a>
<ul>
<li><a href=#fm---registers>FM - Registers</a></li>
<li><a href=#fm---commands>FM - Commands</a></li>
<li><a href=#fm---source-code>FM - Source code</a></li>
</ul>
</li>
<li><a href=#the-moving-platform>The Moving Platform</a>
<ul>
<li><a href=#mp---registers>MP - Registers</a></li>
<li><a href=#mp---commands>MP - Commands</a></li>
<li><a href=#mp-source-code>MP: Source code</a></li>
</ul>
</li>
<li><a href=#the-sensor-platform>The Sensor Platform</a>
<ul>
<li><a href=#sp---registers>SP - Registers</a></li>
<li><a href=#sp---commands>SP - Commands</a></li>
<li><a href=#sp-source-code>SP: Source code</a></li>
</ul>
</li>
</ul>
</nav>
</div>
</aside>
</main>
</body>
</html>